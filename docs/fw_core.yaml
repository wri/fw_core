openapi: 3.1.0
info:
  title: fw_core
  version: '1.0'
  summary: Core Services of GFW
  description: 'Combination of Areas, Teams, Reports, Assignments and Routes'
servers:
  - url: 'http://localhost:3000'
    description: Local
  - url: 'https://api.globalforestwatch.org'
    description: Production
  - url: 'https://staging-fw-api.globalforestwatch.org'
    description: Staging
  - url: 'https://dev-fw-api.globalforestwatch.org'
    description: Dev
paths:
  /v3/gfw/assignments:
    post:
      summary: Create an Assignment
      operationId: post-v3-gfw-assignments
      responses:
        '201':
          $ref: '#/components/responses/Assignment-Response'
        '401':
          $ref: '#/components/responses/Error'
      requestBody:
        $ref: '#/components/requestBodies/AssignmentBody'
      description: Creates an assignment
      tags:
        - Assignments
  /v3/gfw/assignments/user:
    get:
      summary: Get User Assignments
      tags:
        - Assignments
      responses:
        '200':
          $ref: '#/components/responses/Assignments-Response'
        '401':
          $ref: '#/components/responses/Error'
      operationId: get-v3-gfw-user
      description: Returns a user's assignments
    parameters: []
  /v3/gfw/assignments/teams:
    get:
      summary: Get Team Assignments
      tags:
        - Assignments
      responses:
        '200':
          $ref: '#/components/responses/Assignments-Response'
        '401':
          $ref: '#/components/responses/Error'
      operationId: get-v3-gfw-assignments-teams
      description: Returns all assignments relating to the user's teams
  /v3/gfw/assignments/open:
    get:
      summary: Get Open User Assignments
      responses:
        '200':
          $ref: '#/components/responses/Assignments-Response'
        '401':
          $ref: '#/components/responses/Error'
      operationId: get-v3-gfw-assignments-open
      description: Returns all non-complete user assignments
      tags:
        - Assignments
  '/v3/gfw/assignments/area/:areaId':
    get:
      summary: Get Area Assignments
      tags:
        - Assignments
      responses:
        '200':
          $ref: '#/components/responses/Assignments-Response'
        '401':
          $ref: '#/components/responses/Error'
      operationId: 'get-v3-gfw-assignments-area-:areaId'
      description: Returns all user assignments within an area
  '/v3/gfw/assignments/:assignmentId':
    get:
      summary: Get Assignment
      tags:
        - Assignments
      responses: {}
      operationId: 'get-v3-gfw-assignments-:assignmentId'
      description: Gets a single assignment
    patch:
      summary: Update Assignment
      operationId: 'patch-v3-gfw-assignments-:assignmentId'
      responses:
        '200':
          $ref: '#/components/responses/Assignment-Response'
        '401':
          $ref: '#/components/responses/Error'
        '403':
          $ref: '#/components/responses/Error'
      description: Updates an assignment
      tags:
        - Assignments
      requestBody:
        $ref: '#/components/requestBodies/AssignmentBody'
    delete:
      summary: Delete Assignment
      operationId: 'delete-v3-gfw-assignments-:assignmentId'
      responses:
        '200':
          description: OK
        '401':
          $ref: '#/components/responses/Error'
        '403':
          $ref: '#/components/responses/Error'
      tags:
        - Assignments
      description: Deletes an assignment
components:
  schemas:
    AssignmentModel:
      type: object
      x-examples:
        example-1:
          name: string
          location: IGeojson
          priority: number;
          monitors: 'string[];'
          notes: string;
          status: string;
          alert: string;
          areaId: string;
          templateId: string;
          teamIds: 'string[];'
          createdAt: Date;
          createdBy: '''string;'''
          areaName: string;
      description: ''
      properties:
        name:
          type: string
        location:
          type: string
        priority:
          type: number
        monitors:
          type: array
          items:
            type: string
        notes:
          type: string
        status:
          type: string
        alert:
          type: string
        areaId:
          type: string
        templateId:
          type: string
        teamIds:
          type: array
          items:
            type: string
        createdAt:
          type: number
        createdBy:
          type: string
        areaName:
          type: string
      required:
        - name
        - priority
        - monitors
        - notes
        - status
        - areaId
        - templateId
        - teamIds
      examples:
        - name: string
          location: string
          priority: 0
          monitors:
            - string
          notes: string
          status: string
          alert: string
          areaId: string
          templateId: string
          teamIds:
            - string
          createdAt: 0
          createdBy: string
          areaName: string
  securitySchemes:
    Authorization:
      type: http
      scheme: bearer
  responses:
    Error:
      description: Error Response
      content:
        application/json:
          schema:
            description: ''
            type: object
            properties:
              errors:
                type: array
                uniqueItems: true
                minItems: 1
                items:
                  required:
                    - status
                    - detail
                  properties:
                    status:
                      type: number
                    detail:
                      type: string
                      minLength: 1
            required:
              - errors
          examples: {}
    Healthcheck:
      description: Healthcheck response
      content:
        application/json:
          schema:
            type: object
            properties:
              uptime:
                type: number
          examples: {}
    Assignment-Response:
      description: Example response
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                type: object
                properties:
                  id:
                    type: string
                  type:
                    type: string
                  attributes:
                    $ref: '#/components/schemas/AssignmentModel'
    Assignments-Response:
      description: Example response
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: string
                    type:
                      type: string
                    attributes:
                      $ref: '#/components/schemas/AssignmentModel'
  requestBodies:
    AssignmentBody:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/AssignmentModel'
security:
  - Authorization: []
